<p>protocol-detail works!</p>

<ng-container *ngIf="protocol$ | async as p; else loading">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <strong>{{ p.title }}</strong>
       
        <a class="btn btn-sm btn-outline-secondary" [routerLink]="['/protocol', p.protocolId, 'edit']">
        <i class="bi bi-pencil"></i> Edit
        </a>


    </div>
    <div class="card-body">
      <div class="row gy-2">
        <div class="col-md-3"><strong>ID:</strong> {{ p.protocolId }}</div>
        <div class="col-md-3"><strong>Phase:</strong> {{ p.phase }}</div>
        <div class="col-md-3"><strong>Status:</strong> {{ p.status }}</div>
        <div class="col-md-3"><strong>Start:</strong> {{ p.startDate | date:'mediumDate' }}</div>
        <div class="col-md-3"><strong>End:</strong> {{ p.endDate | date:'mediumDate' }}</div>
        <div class="col-md-12"><strong>Objectives:</strong><br>{{ p.objectives }}</div>
        <div class="col-md-6"><strong>Inclusion Criteria:</strong><br>{{ p.inclusionCriteria }}</div>
        <div class="col-md-6"><strong>Exclusion Criteria:</strong><br>{{ p.exclusionCriteria }}</div>
        <div class="col-md-12">
          <strong>Investigators:</strong>
          <ul class="mb-0">
            <li *ngFor="let i of p.investigators ?? []">{{ i.name }} <span class="text-muted">{{ i.email }}</span></li>
          </ul>
        </div>
        <div class="col-md-12">
          <strong>Study Sites:</strong>
          <span class="badge bg-info me-2" *ngFor="let s of p.studySiteIds ?? []">{{ s }}</span>
        </div>
        <div class="col-md-12" *ngIf="p.documents?.length">
          <strong>Documents:</strong>
          <ul class="mb-0">
            <li *ngFor="let d of p.documents">{{ d.name }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #loading>
  <div class="alert alert-info">Loading protocol...</div>
</ng-template>
